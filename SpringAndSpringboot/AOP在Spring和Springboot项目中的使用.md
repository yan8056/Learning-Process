# 分别在Spring项目和Spring boot项目中使用AOP实现接口调用日志记录

​                                                                                                                      *作者：GeneMO	最后编辑于：20200426*

## 一、综述

**AOP原理：**在切点方法被调用时进行拦截，执行切面内容，在恰当的时候重启切点方法使其执行。

**优点：**非侵入，业务代码及安全、日志、事务等代码完全可以分别进行开发，系统对同一类事件能获得统一的处理方式（比如所有接口日志的记录方式都是统一的）。

**实现：**Spring提供了注解用来指定切面，提供了切点包装类用来获取切点方法的一系列信息。

> - 添加AOP依赖配置及依赖包
> - 编写切面类（及切面相关业务处理类——如果需要的话）
> - 使用合适的方式获取切点（XML配置繁琐且代码具有隐蔽性，推荐使用Java配置）

**获取切点方式：**通过execution()获取、Spring提供的一些其他函数（如within()）、通过拦截注解获取（可以是框架自带注解或自定义注解）

> - 作为接口提供方，且接口均在指定包下的：可使用execution()
> - 作为接口调用方，可使用自定义注解（接口相关信息可以添加为自定义注解的参数）

## 二、Spring及Spring boot配置对比

- #### Spring

> 1. 需要在pom文件中添加依赖，依赖包括三个：**spring-aop**、**aspectjrt** 和 **aspectjweaver**
> 2. 需要在配置文件中启动自动代理、配置切面bean

- #### Spring boot

> 1. 需要在pom文件中添加依赖，仅添加**spring-boot-starter-aop**即可（spring-boot-starter-aop 模块自身提供了针对 spring-aop、aspectjrt 和 aspectjweaver 的依赖）

